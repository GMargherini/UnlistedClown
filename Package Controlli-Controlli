package Controlli;

import java.util.InputMismatchException;
import java.util.Scanner;

public class Controlli {
	
	//metodo che controlla il menu
	public static byte controllomenu(byte inf, byte sup, String riga) {
		byte num = 0;
		while(true) {
			try {
				Scanner sc = new Scanner(System.in);
				System.out.println(riga);
				while(sc.hasNext()) {
					num = sc.nextByte();
					if(num>=inf && num<=sup)
						return num;
					else
						System.out.println("Inserisci un numero presente nella lista");
				}
				sc.close();
			}
			catch (InputMismatchException e) {
				System.out.println("Valore inserito non coerente\ninserisca un numero presente nella lista");
			}
		}
	}
	
	//metodo di input stringhe
	public static String inputstringhe(String riga, byte max) {
		String s;
		Scanner sc = new Scanner(System.in);
		do {
			System.out.println("Inserisci "+riga);
			s = sc.nextLine();
		} while(s.length()>max);
		return s;
	}
	
	//metodo controllo tipologia centro
	public static String tipocentro() {
		Scanner sc = new Scanner(System.in);
		
		System.out.println("Inserisci la tipologia del centro vaccinale\nScelte ospedaliero, aziendale, hub");
		do {
			switch(sc.next()) {
				case "ospedaliero":
					return "ospedaliero";
				case "aziendale":
					return "aziendale";
				case "hub":
					return "hub";
				default :
					System.out.println("Formato errato, riprova (ospedaliero, aziendale, hub)");
			}
		} while(true);
		
	}
	
	//metodo controllo provincie
	public static String province() {
		String s;
		FileManager file_province = new FileManager("Province");
		DataManager file_province_op = new DataManager(file_province);
		String[] sprov = file_province_op.read(0);
		boolean exit = true;
		
		
		do {
			s = Controlli.inputstringhe("la provincia del centro vaccinale, es: 'VA' per varese", (byte) 3);
			for(int i=0; i<sprov.length; i++) {
				if(s.toUpperCase().equals(sprov[i]))
					exit = false;
			}
			if(exit)
				System.out.println("Sigla non valida");
		} while(exit);
		return s.toUpperCase();
	}
	
	//metodo controllo cap
	public static String cap() {
		String s;
		int num = 0;
		boolean exit = true;
		do {
			s = Controlli.inputstringhe("il codice di avviamento postale", (byte) 6);
			try {
				num = Integer.parseInt(s);
			}
			catch(NumberFormatException e) {
				System.out.println("Valore non valido");
			}
			if(num>=10 && num<=97100 && s.length()==5)
				exit = false;
			else
				System.out.println("Valore non valido");
		} while(exit);
		return s;
	}
	
	//metodo controllo codice fiscale
	public static String codicefis() {
		Scanner sc = new Scanner(System.in);
		
		System.out.println("Insersici il codice fiscale (formato tipo AAABBB00C11D222E)");
		while(!sc.hasNext("[A-Z]{6}[0-9]{2}[A-Z][0-7][0-9][A-Z][0-9]{3}[A-Z]$")) {
			System.out.println("Formato errato, ripeti (formato tipo AAABBB00C11D222E)");
			sc.next();
		}
		
		return sc.next();
	}
	
	//metodo controllo data
	public static String data() {
		Scanner sc = new Scanner(System.in);
		
		System.out.println("Inserisci la data del vaccino nel formato gg/mm/aa");
		while(!sc.hasNext("[0-3][0-9]\\/[01][0-9]\\/[2][0-9]$")) {
			System.out.println("Formato errato, ripeti (gg/mm/aa)");
			sc.next();
		}
		return sc.next();
	}
	
	//metodo id univoco
	public static String id(DataManager file_id) {
		int righe = file_id.getLineCount();
		String s;
		int cod;
		if(righe != 0) {
			s = file_id.lastID();
			cod = Integer.parseInt(s, 2);
			cod++;
		}
		else
			cod = 0;
		s = Integer.toBinaryString(cod);
		for(int i=s.length(); i<16; i++)
			s = "0" + s;
		return s;
	}
	
	//metodo controllo nome vaccino
	public static String nomevaccino() {
		Scanner sc = new Scanner(System.in);
		
		System.out.println("Inserisci il nome del vaccino somministrato\nScelte: Pfizer, AstraZeneca, Moderna, J&J");
		do {
			switch(sc.next()) {
				case "Pfizer":
					return "Pzizer";
				case "AstraZeneca":
					return "AstraZeneca";
				case "Moderna":
					return "moderna";
				case "J&J":
					return "J&J";
				default :
					System.out.println("Formato errato, riprova (Pfizer, AstraZeneca, Moderna, J&J)");
			}
		} while(true);
		
	}
	
	//metodo controllo userid
	/*public static Static String user_id() {
		System.out.println("insersci ")
	}*/
	
	
}
